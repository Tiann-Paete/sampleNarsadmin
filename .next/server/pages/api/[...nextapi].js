"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/[...nextapi]";
exports.ids = ["pages/api/[...nextapi]"];
exports.modules = {

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mysql2/promise":
/*!*********************************!*\
  !*** external "mysql2/promise" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("mysql2/promise");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F%5B...nextapi%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5C%5B...nextapi%5D.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F%5B...nextapi%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5C%5B...nextapi%5D.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_nextapi_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\[...nextapi].js */ \"(api)/./src/pages/api/[...nextapi].js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_nextapi_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_nextapi_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/[...nextapi]\",\n        pathname: \"/api/[...nextapi]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_nextapi_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRiU1Qi4uLm5leHRhcGklNUQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1QyU1Qi4uLm5leHRhcGklNUQuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDK0Q7QUFDL0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hZG1pbnBhbmVsLz82YWUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXFsuLi5uZXh0YXBpXS5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL1suLi5uZXh0YXBpXVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL1suLi5uZXh0YXBpXVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F%5B...nextapi%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5C%5B...nextapi%5D.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/[...nextapi].js":
/*!***************************************!*\
  !*** ./src/pages/api/[...nextapi].js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"mysql2/promise\");\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mysql2_promise__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nconst db = mysql2_promise__WEBPACK_IMPORTED_MODULE_0___default().createPool({\n    host: process.env.MYSQL_HOST,\n    port: process.env.MYSQL_PORT,\n    user: process.env.MYSQL_USER,\n    password: process.env.MYSQL_PASSWORD,\n    database: process.env.MYSQL_DATABASE,\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0\n});\nasync function handler(req, res) {\n    const { method } = req;\n    const { pathname, query } = (0,url__WEBPACK_IMPORTED_MODULE_1__.parse)(req.url, true);\n    try {\n        switch(method){\n            case \"GET\":\n                if (pathname === \"/api/check-auth\") {\n                    const cookies = (0,url__WEBPACK_IMPORTED_MODULE_1__.parse)(req.headers.cookie || \"\");\n                    const token = cookies.token;\n                    if (!token) {\n                        return res.status(200).json({\n                            isAuthenticated: false,\n                            usernamePasswordVerified: false\n                        });\n                    }\n                    try {\n                        (0,jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__.verify)(token, process.env.JWT_SECRET);\n                        return res.status(200).json({\n                            isAuthenticated: true,\n                            usernamePasswordVerified: true\n                        });\n                    } catch (error) {\n                        return res.status(200).json({\n                            isAuthenticated: false,\n                            usernamePasswordVerified: false\n                        });\n                    }\n                } else if (pathname === \"/api/products\") {\n                    await handleGetProducts(req, res);\n                } else if (pathname === \"/api/total-stock\") {\n                    await handleGetTotalStock(req, res);\n                } else if (pathname === \"/api/sales-report\") {\n                    await handleGetSalesReport(req, res);\n                } else if (pathname === \"/api/sales-data\") {\n                    await handleGetSalesData(req, res);\n                } else if (pathname === \"/api/total-products\") {\n                    await handleGetTotalProducts(req, res);\n                } else if (pathname === \"/api/top-products\") {\n                    await handleGetTopProducts(req, res);\n                } else if (pathname === \"/api/rated-products-count\") {\n                    await handleGetRatedProductsCount(req, res);\n                } else if (pathname === \"/api/logout\") {\n                    handleLogout(req, res);\n                }\n                break;\n            case \"POST\":\n                if (pathname === \"/api/signin\") {\n                    await handleSignIn(req, res);\n                } else if (pathname === \"/api/validate-pin\") {\n                    await handleValidatePin(req, res);\n                } else if (pathname === \"/api/products\") {\n                    await handleAddProduct(req, res);\n                }\n                break;\n            case \"PUT\":\n                if (pathname.startsWith(\"/api/products/\")) {\n                    await handleUpdateProduct(req, res);\n                } else if (pathname.startsWith(\"/api/orders/\")) {\n                    if (pathname.endsWith(\"/status\")) {\n                        await handleUpdateOrderStatus(req, res);\n                    } else if (pathname.endsWith(\"/cancel\")) {\n                        await handleCancelOrder(req, res);\n                    } else {\n                        await handleUpdateOrder(req, res);\n                    }\n                }\n                break;\n            case \"DELETE\":\n                if (pathname.startsWith(\"/api/products/\")) {\n                    await handleDeleteProduct(req, res);\n                } else if (pathname.startsWith(\"/api/orders/\") && pathname.endsWith(\"/salesreport\")) {\n                    await handleRemoveOrderFromSalesReport(req, res);\n                }\n                break;\n            default:\n                res.setHeader(\"Allow\", [\n                    \"GET\",\n                    \"POST\",\n                    \"PUT\",\n                    \"DELETE\"\n                ]);\n                res.status(405).end(`Method ${method} Not Allowed`);\n        }\n    } catch (error) {\n        console.error(error);\n        res.status(500).json({\n            error: \"An error occurred while processing your request\"\n        });\n    }\n}\nasync function handleGetProducts(req, res) {\n    const { page = 1, limit = 10 } = req.query;\n    const offset = (page - 1) * limit;\n    const [countResult] = await db.query(\"SELECT COUNT(*) as total FROM products\");\n    const totalItems = countResult[0].total;\n    const totalPages = Math.ceil(totalItems / limit);\n    const [products] = await db.query(\"SELECT * FROM products LIMIT ? OFFSET ?\", [\n        parseInt(limit),\n        offset\n    ]);\n    res.status(200).json({\n        products,\n        currentPage: parseInt(page),\n        totalPages,\n        totalItems\n    });\n}\nasync function handleSignIn(req, res) {\n    const { username, password } = req.body;\n    try {\n        const [results] = await db.query(\"SELECT * FROM admin WHERE username = ? AND password = ?\", [\n            username,\n            password\n        ]);\n        if (results.length === 0) {\n            return res.status(401).json({\n                error: \"Invalid username or password\"\n            });\n        }\n        const user = results[0];\n        const token = (0,jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__.sign)({\n            userId: user.id\n        }, process.env.JWT_SECRET, {\n            expiresIn: \"1h\"\n        });\n        res.setHeader(\"Set-Cookie\", `token=${token}; HttpOnly; Path=/; Max-Age=3600; SameSite=Strict`);\n        res.status(200).json({\n            success: true,\n            message: \"Signin successful\",\n            username: user.username\n        });\n    } catch (error) {\n        console.error(\"Sign in error:\", error);\n        res.status(500).json({\n            error: \"An error occurred during signin\"\n        });\n    }\n}\nasync function handleValidatePin(req, res) {\n    const { pin } = req.body;\n    if (pin === \"12345\") {\n        res.status(200).json({\n            success: true,\n            message: \"Pin validated successfully\"\n        });\n    } else {\n        res.status(401).json({\n            error: \"Invalid pin\"\n        });\n    }\n}\nasync function handleGetTotalStock(req, res) {\n    const [result] = await db.query(\"SELECT SUM(stock_quantity) as totalStock FROM products\");\n    res.status(200).json({\n        totalStock: result[0].totalStock\n    });\n}\nasync function handleGetSalesReport(req, res) {\n    const [result] = await db.query(\"SELECT * FROM user_login\");\n    res.status(200).json(result);\n}\nasync function handleGetSalesData(req, res) {\n    const { timeFrame } = req.query;\n    let dateCondition;\n    switch(timeFrame){\n        case \"today\":\n            dateCondition = \"DATE(order_date) = CURDATE()\";\n            break;\n        case \"yesterday\":\n            dateCondition = \"DATE(order_date) = DATE_SUB(CURDATE(), INTERVAL 1 DAY)\";\n            break;\n        case \"lastWeek\":\n            dateCondition = \"DATE(order_date) BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND CURDATE()\";\n            break;\n        case \"lastMonth\":\n            dateCondition = \"DATE(order_date) BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 MONTH) AND CURDATE()\";\n            break;\n        default:\n            dateCondition = \"DATE(order_date) = CURDATE()\";\n    }\n    const [result] = await db.query(`\r\n    SELECT \r\n      COALESCE(SUM(total), 0) as periodSales,\r\n      COUNT(*) as totalOrders,\r\n      COUNT(DISTINCT user_id) as totalCustomers\r\n    FROM orders\r\n    WHERE ${dateCondition}\r\n  `);\n    res.status(200).json(result[0]);\n}\nasync function handleGetTotalProducts(req, res) {\n    const [result] = await db.query(\"SELECT COUNT(*) as totalProducts FROM products\");\n    res.status(200).json(result[0]);\n}\nasync function handleGetTopProducts(req, res) {\n    const [result] = await db.query(`\r\n    SELECT \r\n      p.id,\r\n      p.name,\r\n      p.image_url,\r\n      p.rating,\r\n      COALESCE(SUM(op.quantity), 0) as sold\r\n    FROM products p\r\n    LEFT JOIN ordered_products op ON p.id = op.product_id\r\n    GROUP BY p.id\r\n    ORDER BY sold DESC, p.rating DESC\r\n    LIMIT 5\r\n  `);\n    res.status(200).json(result);\n}\nasync function handleGetRatedProductsCount(req, res) {\n    const { timeFrame } = req.query;\n    let dateCondition;\n    switch(timeFrame){\n        case \"today\":\n            dateCondition = \"DATE(created_at) = CURDATE()\";\n            break;\n        case \"yesterday\":\n            dateCondition = \"DATE(created_at) = DATE_SUB(CURDATE(), INTERVAL 1 DAY)\";\n            break;\n        case \"lastWeek\":\n            dateCondition = \"DATE(created_at) BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 WEEK) AND CURDATE()\";\n            break;\n        case \"lastMonth\":\n            dateCondition = \"DATE(created_at) BETWEEN DATE_SUB(CURDATE(), INTERVAL 1 MONTH) AND CURDATE()\";\n            break;\n        default:\n            dateCondition = \"DATE(created_at) = CURDATE()\";\n    }\n    const [result] = await db.query(`\r\n    SELECT COUNT(DISTINCT product_id) as ratedProductsCount\r\n    FROM product_ratings\r\n    WHERE ${dateCondition}\r\n  `);\n    res.status(200).json(result[0]);\n}\nfunction handleLogout(req, res) {\n    res.setHeader(\"Set-Cookie\", \"token=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; HttpOnly\");\n    res.status(200).json({\n        success: true,\n        message: \"Logout successful\"\n    });\n}\nasync function handleAddProduct(req, res) {\n    const { name, description, price, image_url, stock_quantity, category, supplier_id, rating } = req.body;\n    const order_id = generateOrderId();\n    const sql = \"INSERT INTO products (name, description, price, image_url, stock_quantity, category, supplier_id, order_id, rating) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\";\n    const [result] = await db.query(sql, [\n        name,\n        description,\n        price,\n        image_url,\n        stock_quantity,\n        category,\n        supplier_id,\n        order_id,\n        rating\n    ]);\n    res.status(201).json({\n        message: \"Product added successfully\",\n        id: result.insertId,\n        order_id: order_id\n    });\n}\nasync function handleUpdateProduct(req, res) {\n    const { name, description, price, image_url, stock_quantity, category, supplier_id, rating } = req.body;\n    const { id } = req.query;\n    const sql = \"UPDATE products SET name=?, description=?, price=?, image_url=?, stock_quantity=?, category=?, supplier_id=?, rating=? WHERE id=?\";\n    const [result] = await db.query(sql, [\n        name,\n        description,\n        price,\n        image_url,\n        stock_quantity,\n        category,\n        supplier_id,\n        rating,\n        id\n    ]);\n    if (result.affectedRows === 0) {\n        res.status(404).json({\n            error: \"Product not found\"\n        });\n    } else {\n        res.status(200).json({\n            message: \"Product updated successfully\"\n        });\n    }\n}\nasync function handleDeleteProduct(req, res) {\n    const { id } = req.query;\n    const sql = \"DELETE FROM products WHERE id=?\";\n    const [result] = await db.query(sql, [\n        id\n    ]);\n    if (result.affectedRows === 0) {\n        res.status(404).json({\n            error: \"Product not found\"\n        });\n    } else {\n        res.status(200).json({\n            message: \"Product deleted successfully\"\n        });\n    }\n}\nasync function handleUpdateOrderStatus(req, res) {\n    const { id } = req.query;\n    const { status } = req.body;\n    const sql = \"UPDATE orders SET status = ? WHERE id = ?\";\n    const [result] = await db.query(sql, [\n        status,\n        id\n    ]);\n    if (result.affectedRows === 0) {\n        res.status(404).json({\n            error: \"Order not found\"\n        });\n    } else {\n        res.status(200).json({\n            message: \"Order status updated successfully\",\n            status: status\n        });\n    }\n}\nasync function handleCancelOrder(req, res) {\n    const { id } = req.query;\n    const sql = \"UPDATE orders SET status = 'Cancelled' WHERE id = ?\";\n    const [result] = await db.query(sql, [\n        id\n    ]);\n    if (result.affectedRows === 0) {\n        res.status(404).json({\n            error: \"Order not found\"\n        });\n    } else {\n        res.status(200).json({\n            message: \"Order cancelled successfully\"\n        });\n    }\n}\nasync function handleUpdateOrder(req, res) {\n    const { id } = req.query;\n    const { order_date } = req.body;\n    const sql = \"UPDATE orders SET order_date = ? WHERE id = ?\";\n    const [result] = await db.query(sql, [\n        order_date,\n        id\n    ]);\n    if (result.affectedRows === 0) {\n        res.status(404).json({\n            error: \"Order not found\"\n        });\n    } else {\n        res.status(200).json({\n            message: \"Order date updated successfully\"\n        });\n    }\n}\nasync function handleRemoveOrderFromSalesReport(req, res) {\n    const { id } = req.query;\n    const sql = \"UPDATE orders SET in_sales_report = 0 WHERE id = ?\";\n    const [result] = await db.query(sql, [\n        id\n    ]);\n    if (result.affectedRows === 0) {\n        res.status(404).json({\n            error: \"Order not found\"\n        });\n    } else {\n        res.status(200).json({\n            message: \"Order removed from sales report successfully\"\n        });\n    }\n}\nfunction generateOrderId() {\n    return \"ORD-\" + Math.random().toString(36).substr(2, 9).toUpperCase();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNqRjtBQUNGO0FBRUEsU0FBU2U7SUFDUCxPQUFPLFNBQVM1QixLQUFLaUMsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsTUFBTSxDQUFDLEdBQUcsR0FBR0MsV0FBVztBQUNyRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FkbWlucGFuZWwvLi9zcmMvcGFnZXMvYXBpL1suLi5uZXh0YXBpXS5qcz8yODc5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBteXNxbCBmcm9tICdteXNxbDIvcHJvbWlzZSc7XHJcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSAndXJsJztcclxuaW1wb3J0IHsgc2lnbiB9IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCB7IHZlcmlmeSB9IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcblxyXG5cclxuY29uc3QgZGIgPSBteXNxbC5jcmVhdGVQb29sKHtcclxuICBob3N0OiBwcm9jZXNzLmVudi5NWVNRTF9IT1NULFxyXG4gIHBvcnQ6IHByb2Nlc3MuZW52Lk1ZU1FMX1BPUlQsXHJcbiAgdXNlcjogcHJvY2Vzcy5lbnYuTVlTUUxfVVNFUixcclxuICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuTVlTUUxfUEFTU1dPUkQsXHJcbiAgZGF0YWJhc2U6IHByb2Nlc3MuZW52Lk1ZU1FMX0RBVEFCQVNFLFxyXG4gIHdhaXRGb3JDb25uZWN0aW9uczogdHJ1ZSxcclxuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxyXG4gIHF1ZXVlTGltaXQ6IDBcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgY29uc3QgeyBtZXRob2QgfSA9IHJlcTtcclxuICBjb25zdCB7IHBhdGhuYW1lLCBxdWVyeSB9ID0gcGFyc2UocmVxLnVybCwgdHJ1ZSk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBzd2l0Y2ggKG1ldGhvZCkge1xyXG4gICAgICBjYXNlICdHRVQnOlxyXG4gICAgICAgIGlmIChwYXRobmFtZSA9PT0gJy9hcGkvY2hlY2stYXV0aCcpIHtcclxuICAgICAgICAgIGNvbnN0IGNvb2tpZXMgPSBwYXJzZShyZXEuaGVhZGVycy5jb29raWUgfHwgJycpO1xyXG4gICAgICAgICAgY29uc3QgdG9rZW4gPSBjb29raWVzLnRva2VuO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLCB1c2VybmFtZVBhc3N3b3JkVmVyaWZpZWQ6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgaXNBdXRoZW50aWNhdGVkOiB0cnVlLCB1c2VybmFtZVBhc3N3b3JkVmVyaWZpZWQ6IHRydWUgfSk7XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLCB1c2VybmFtZVBhc3N3b3JkVmVyaWZpZWQ6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAocGF0aG5hbWUgPT09ICcvYXBpL3Byb2R1Y3RzJykge1xyXG4gICAgICAgICAgYXdhaXQgaGFuZGxlR2V0UHJvZHVjdHMocmVxLCByZXMpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGF0aG5hbWUgPT09ICcvYXBpL3RvdGFsLXN0b2NrJykge1xyXG4gICAgICAgICAgYXdhaXQgaGFuZGxlR2V0VG90YWxTdG9jayhyZXEsIHJlcyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXRobmFtZSA9PT0gJy9hcGkvc2FsZXMtcmVwb3J0Jykge1xyXG4gICAgICAgICAgYXdhaXQgaGFuZGxlR2V0U2FsZXNSZXBvcnQocmVxLCByZXMpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGF0aG5hbWUgPT09ICcvYXBpL3NhbGVzLWRhdGEnKSB7XHJcbiAgICAgICAgICBhd2FpdCBoYW5kbGVHZXRTYWxlc0RhdGEocmVxLCByZXMpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGF0aG5hbWUgPT09ICcvYXBpL3RvdGFsLXByb2R1Y3RzJykge1xyXG4gICAgICAgICAgYXdhaXQgaGFuZGxlR2V0VG90YWxQcm9kdWN0cyhyZXEsIHJlcyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXRobmFtZSA9PT0gJy9hcGkvdG9wLXByb2R1Y3RzJykge1xyXG4gICAgICAgICAgYXdhaXQgaGFuZGxlR2V0VG9wUHJvZHVjdHMocmVxLCByZXMpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGF0aG5hbWUgPT09ICcvYXBpL3JhdGVkLXByb2R1Y3RzLWNvdW50Jykge1xyXG4gICAgICAgICAgYXdhaXQgaGFuZGxlR2V0UmF0ZWRQcm9kdWN0c0NvdW50KHJlcSwgcmVzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHBhdGhuYW1lID09PSAnL2FwaS9sb2dvdXQnKSB7XHJcbiAgICAgICAgICBoYW5kbGVMb2dvdXQocmVxLCByZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ1BPU1QnOlxyXG4gICAgICAgIGlmIChwYXRobmFtZSA9PT0gJy9hcGkvc2lnbmluJykge1xyXG4gICAgICAgICAgYXdhaXQgaGFuZGxlU2lnbkluKHJlcSwgcmVzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHBhdGhuYW1lID09PSAnL2FwaS92YWxpZGF0ZS1waW4nKSB7XHJcbiAgICAgICAgICBhd2FpdCBoYW5kbGVWYWxpZGF0ZVBpbihyZXEsIHJlcyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXRobmFtZSA9PT0gJy9hcGkvcHJvZHVjdHMnKSB7XHJcbiAgICAgICAgICBhd2FpdCBoYW5kbGVBZGRQcm9kdWN0KHJlcSwgcmVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdQVVQnOlxyXG4gICAgICAgIGlmIChwYXRobmFtZS5zdGFydHNXaXRoKCcvYXBpL3Byb2R1Y3RzLycpKSB7XHJcbiAgICAgICAgICBhd2FpdCBoYW5kbGVVcGRhdGVQcm9kdWN0KHJlcSwgcmVzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9hcGkvb3JkZXJzLycpKSB7XHJcbiAgICAgICAgICBpZiAocGF0aG5hbWUuZW5kc1dpdGgoJy9zdGF0dXMnKSkge1xyXG4gICAgICAgICAgICBhd2FpdCBoYW5kbGVVcGRhdGVPcmRlclN0YXR1cyhyZXEsIHJlcyk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHBhdGhuYW1lLmVuZHNXaXRoKCcvY2FuY2VsJykpIHtcclxuICAgICAgICAgICAgYXdhaXQgaGFuZGxlQ2FuY2VsT3JkZXIocmVxLCByZXMpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgaGFuZGxlVXBkYXRlT3JkZXIocmVxLCByZXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ0RFTEVURSc6XHJcbiAgICAgICAgaWYgKHBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9hcGkvcHJvZHVjdHMvJykpIHtcclxuICAgICAgICAgIGF3YWl0IGhhbmRsZURlbGV0ZVByb2R1Y3QocmVxLCByZXMpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGF0aG5hbWUuc3RhcnRzV2l0aCgnL2FwaS9vcmRlcnMvJykgJiYgcGF0aG5hbWUuZW5kc1dpdGgoJy9zYWxlc3JlcG9ydCcpKSB7XHJcbiAgICAgICAgICBhd2FpdCBoYW5kbGVSZW1vdmVPcmRlckZyb21TYWxlc1JlcG9ydChyZXEsIHJlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnR0VUJywgJ1BPU1QnLCAnUFVUJywgJ0RFTEVURSddKTtcclxuICAgICAgICByZXMuc3RhdHVzKDQwNSkuZW5kKGBNZXRob2QgJHttZXRob2R9IE5vdCBBbGxvd2VkYCk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgeW91ciByZXF1ZXN0JyB9KTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUdldFByb2R1Y3RzKHJlcSwgcmVzKSB7XHJcbiAgY29uc3QgeyBwYWdlID0gMSwgbGltaXQgPSAxMCB9ID0gcmVxLnF1ZXJ5O1xyXG4gIGNvbnN0IG9mZnNldCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcclxuXHJcbiAgY29uc3QgW2NvdW50UmVzdWx0XSA9IGF3YWl0IGRiLnF1ZXJ5KCdTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBwcm9kdWN0cycpO1xyXG4gIGNvbnN0IHRvdGFsSXRlbXMgPSBjb3VudFJlc3VsdFswXS50b3RhbDtcclxuICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsSXRlbXMgLyBsaW1pdCk7XHJcblxyXG4gIGNvbnN0IFtwcm9kdWN0c10gPSBhd2FpdCBkYi5xdWVyeSgnU0VMRUNUICogRlJPTSBwcm9kdWN0cyBMSU1JVCA/IE9GRlNFVCA/JywgW3BhcnNlSW50KGxpbWl0KSwgb2Zmc2V0XSk7XHJcblxyXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgIHByb2R1Y3RzLFxyXG4gICAgY3VycmVudFBhZ2U6IHBhcnNlSW50KHBhZ2UpLFxyXG4gICAgdG90YWxQYWdlcyxcclxuICAgIHRvdGFsSXRlbXNcclxuICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlU2lnbkluKHJlcSwgcmVzKSB7XHJcbiAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBbcmVzdWx0c10gPSBhd2FpdCBkYi5xdWVyeSgnU0VMRUNUICogRlJPTSBhZG1pbiBXSEVSRSB1c2VybmFtZSA9ID8gQU5EIHBhc3N3b3JkID0gPycsIFt1c2VybmFtZSwgcGFzc3dvcmRdKTtcclxuXHJcbiAgICBpZiAocmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1c2VyID0gcmVzdWx0c1swXTtcclxuICAgIGNvbnN0IHRva2VuID0gc2lnbih7IHVzZXJJZDogdXNlci5pZCB9LCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogJzFoJyB9KTtcclxuICAgIFxyXG4gICAgcmVzLnNldEhlYWRlcignU2V0LUNvb2tpZScsIGB0b2tlbj0ke3Rva2VufTsgSHR0cE9ubHk7IFBhdGg9LzsgTWF4LUFnZT0zNjAwOyBTYW1lU2l0ZT1TdHJpY3RgKTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ1NpZ25pbiBzdWNjZXNzZnVsJywgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1NpZ24gaW4gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0FuIGVycm9yIG9jY3VycmVkIGR1cmluZyBzaWduaW4nIH0pO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlVmFsaWRhdGVQaW4ocmVxLCByZXMpIHtcclxuICBjb25zdCB7IHBpbiB9ID0gcmVxLmJvZHk7XHJcbiAgaWYgKHBpbiA9PT0gJzEyMzQ1Jykge1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnUGluIHZhbGlkYXRlZCBzdWNjZXNzZnVsbHknIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnSW52YWxpZCBwaW4nIH0pO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlR2V0VG90YWxTdG9jayhyZXEsIHJlcykge1xyXG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZGIucXVlcnkoJ1NFTEVDVCBTVU0oc3RvY2tfcXVhbnRpdHkpIGFzIHRvdGFsU3RvY2sgRlJPTSBwcm9kdWN0cycpO1xyXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdG90YWxTdG9jazogcmVzdWx0WzBdLnRvdGFsU3RvY2sgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUdldFNhbGVzUmVwb3J0KHJlcSwgcmVzKSB7XHJcbiAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBkYi5xdWVyeSgnU0VMRUNUICogRlJPTSB1c2VyX2xvZ2luJyk7XHJcbiAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlR2V0U2FsZXNEYXRhKHJlcSwgcmVzKSB7XHJcbiAgY29uc3QgeyB0aW1lRnJhbWUgfSA9IHJlcS5xdWVyeTtcclxuICBsZXQgZGF0ZUNvbmRpdGlvbjtcclxuXHJcbiAgc3dpdGNoICh0aW1lRnJhbWUpIHtcclxuICAgIGNhc2UgJ3RvZGF5JzpcclxuICAgICAgZGF0ZUNvbmRpdGlvbiA9ICdEQVRFKG9yZGVyX2RhdGUpID0gQ1VSREFURSgpJztcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICd5ZXN0ZXJkYXknOlxyXG4gICAgICBkYXRlQ29uZGl0aW9uID0gJ0RBVEUob3JkZXJfZGF0ZSkgPSBEQVRFX1NVQihDVVJEQVRFKCksIElOVEVSVkFMIDEgREFZKSc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnbGFzdFdlZWsnOlxyXG4gICAgICBkYXRlQ29uZGl0aW9uID0gJ0RBVEUob3JkZXJfZGF0ZSkgQkVUV0VFTiBEQVRFX1NVQihDVVJEQVRFKCksIElOVEVSVkFMIDEgV0VFSykgQU5EIENVUkRBVEUoKSc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnbGFzdE1vbnRoJzpcclxuICAgICAgZGF0ZUNvbmRpdGlvbiA9ICdEQVRFKG9yZGVyX2RhdGUpIEJFVFdFRU4gREFURV9TVUIoQ1VSREFURSgpLCBJTlRFUlZBTCAxIE1PTlRIKSBBTkQgQ1VSREFURSgpJztcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICBkYXRlQ29uZGl0aW9uID0gJ0RBVEUob3JkZXJfZGF0ZSkgPSBDVVJEQVRFKCknO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBkYi5xdWVyeShgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgIENPQUxFU0NFKFNVTSh0b3RhbCksIDApIGFzIHBlcmlvZFNhbGVzLFxyXG4gICAgICBDT1VOVCgqKSBhcyB0b3RhbE9yZGVycyxcclxuICAgICAgQ09VTlQoRElTVElOQ1QgdXNlcl9pZCkgYXMgdG90YWxDdXN0b21lcnNcclxuICAgIEZST00gb3JkZXJzXHJcbiAgICBXSEVSRSAke2RhdGVDb25kaXRpb259XHJcbiAgYCk7XHJcblxyXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdFswXSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUdldFRvdGFsUHJvZHVjdHMocmVxLCByZXMpIHtcclxuICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IGRiLnF1ZXJ5KCdTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWxQcm9kdWN0cyBGUk9NIHByb2R1Y3RzJyk7XHJcbiAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0WzBdKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlR2V0VG9wUHJvZHVjdHMocmVxLCByZXMpIHtcclxuICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IGRiLnF1ZXJ5KGBcclxuICAgIFNFTEVDVCBcclxuICAgICAgcC5pZCxcclxuICAgICAgcC5uYW1lLFxyXG4gICAgICBwLmltYWdlX3VybCxcclxuICAgICAgcC5yYXRpbmcsXHJcbiAgICAgIENPQUxFU0NFKFNVTShvcC5xdWFudGl0eSksIDApIGFzIHNvbGRcclxuICAgIEZST00gcHJvZHVjdHMgcFxyXG4gICAgTEVGVCBKT0lOIG9yZGVyZWRfcHJvZHVjdHMgb3AgT04gcC5pZCA9IG9wLnByb2R1Y3RfaWRcclxuICAgIEdST1VQIEJZIHAuaWRcclxuICAgIE9SREVSIEJZIHNvbGQgREVTQywgcC5yYXRpbmcgREVTQ1xyXG4gICAgTElNSVQgNVxyXG4gIGApO1xyXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUdldFJhdGVkUHJvZHVjdHNDb3VudChyZXEsIHJlcykge1xyXG4gIGNvbnN0IHsgdGltZUZyYW1lIH0gPSByZXEucXVlcnk7XHJcbiAgbGV0IGRhdGVDb25kaXRpb247XHJcblxyXG4gIHN3aXRjaCAodGltZUZyYW1lKSB7XHJcbiAgICBjYXNlICd0b2RheSc6XHJcbiAgICAgIGRhdGVDb25kaXRpb24gPSAnREFURShjcmVhdGVkX2F0KSA9IENVUkRBVEUoKSc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAneWVzdGVyZGF5JzpcclxuICAgICAgZGF0ZUNvbmRpdGlvbiA9ICdEQVRFKGNyZWF0ZWRfYXQpID0gREFURV9TVUIoQ1VSREFURSgpLCBJTlRFUlZBTCAxIERBWSknO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2xhc3RXZWVrJzpcclxuICAgICAgZGF0ZUNvbmRpdGlvbiA9ICdEQVRFKGNyZWF0ZWRfYXQpIEJFVFdFRU4gREFURV9TVUIoQ1VSREFURSgpLCBJTlRFUlZBTCAxIFdFRUspIEFORCBDVVJEQVRFKCknO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2xhc3RNb250aCc6XHJcbiAgICAgIGRhdGVDb25kaXRpb24gPSAnREFURShjcmVhdGVkX2F0KSBCRVRXRUVOIERBVEVfU1VCKENVUkRBVEUoKSwgSU5URVJWQUwgMSBNT05USCkgQU5EIENVUkRBVEUoKSc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgZGF0ZUNvbmRpdGlvbiA9ICdEQVRFKGNyZWF0ZWRfYXQpID0gQ1VSREFURSgpJztcclxuICB9XHJcblxyXG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZGIucXVlcnkoYFxyXG4gICAgU0VMRUNUIENPVU5UKERJU1RJTkNUIHByb2R1Y3RfaWQpIGFzIHJhdGVkUHJvZHVjdHNDb3VudFxyXG4gICAgRlJPTSBwcm9kdWN0X3JhdGluZ3NcclxuICAgIFdIRVJFICR7ZGF0ZUNvbmRpdGlvbn1cclxuICBgKTtcclxuXHJcbiAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzdWx0WzBdKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTG9nb3V0KHJlcSwgcmVzKSB7XHJcbiAgcmVzLnNldEhlYWRlcignU2V0LUNvb2tpZScsICd0b2tlbj07IFBhdGg9LzsgRXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVDsgSHR0cE9ubHknKTtcclxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdMb2dvdXQgc3VjY2Vzc2Z1bCcgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUFkZFByb2R1Y3QocmVxLCByZXMpIHtcclxuICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uLCBwcmljZSwgaW1hZ2VfdXJsLCBzdG9ja19xdWFudGl0eSwgY2F0ZWdvcnksIHN1cHBsaWVyX2lkLCByYXRpbmcgfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnN0IG9yZGVyX2lkID0gZ2VuZXJhdGVPcmRlcklkKCk7XHJcbiAgY29uc3Qgc3FsID0gXCJJTlNFUlQgSU5UTyBwcm9kdWN0cyAobmFtZSwgZGVzY3JpcHRpb24sIHByaWNlLCBpbWFnZV91cmwsIHN0b2NrX3F1YW50aXR5LCBjYXRlZ29yeSwgc3VwcGxpZXJfaWQsIG9yZGVyX2lkLCByYXRpbmcpIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPylcIjtcclxuICBjb25zdCBbcmVzdWx0XSA9IGF3YWl0IGRiLnF1ZXJ5KHNxbCwgW25hbWUsIGRlc2NyaXB0aW9uLCBwcmljZSwgaW1hZ2VfdXJsLCBzdG9ja19xdWFudGl0eSwgY2F0ZWdvcnksIHN1cHBsaWVyX2lkLCBvcmRlcl9pZCwgcmF0aW5nXSk7XHJcbiAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBtZXNzYWdlOiAnUHJvZHVjdCBhZGRlZCBzdWNjZXNzZnVsbHknLCBpZDogcmVzdWx0Lmluc2VydElkLCBvcmRlcl9pZDogb3JkZXJfaWQgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZVByb2R1Y3QocmVxLCByZXMpIHtcclxuICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uLCBwcmljZSwgaW1hZ2VfdXJsLCBzdG9ja19xdWFudGl0eSwgY2F0ZWdvcnksIHN1cHBsaWVyX2lkLCByYXRpbmcgfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5xdWVyeTtcclxuICBjb25zdCBzcWwgPSBcIlVQREFURSBwcm9kdWN0cyBTRVQgbmFtZT0/LCBkZXNjcmlwdGlvbj0/LCBwcmljZT0/LCBpbWFnZV91cmw9Pywgc3RvY2tfcXVhbnRpdHk9PywgY2F0ZWdvcnk9Pywgc3VwcGxpZXJfaWQ9PywgcmF0aW5nPT8gV0hFUkUgaWQ9P1wiO1xyXG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZGIucXVlcnkoc3FsLCBbbmFtZSwgZGVzY3JpcHRpb24sIHByaWNlLCBpbWFnZV91cmwsIHN0b2NrX3F1YW50aXR5LCBjYXRlZ29yeSwgc3VwcGxpZXJfaWQsIHJhdGluZywgaWRdKTtcclxuICBpZiAocmVzdWx0LmFmZmVjdGVkUm93cyA9PT0gMCkge1xyXG4gICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1Byb2R1Y3Qgbm90IGZvdW5kJyB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnUHJvZHVjdCB1cGRhdGVkIHN1Y2Nlc3NmdWxseScgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVEZWxldGVQcm9kdWN0KHJlcSwgcmVzKSB7XHJcbiAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5O1xyXG4gIGNvbnN0IHNxbCA9IFwiREVMRVRFIEZST00gcHJvZHVjdHMgV0hFUkUgaWQ9P1wiO1xyXG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZGIucXVlcnkoc3FsLCBbaWRdKTtcclxuICBpZiAocmVzdWx0LmFmZmVjdGVkUm93cyA9PT0gMCkge1xyXG4gICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1Byb2R1Y3Qgbm90IGZvdW5kJyB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnUHJvZHVjdCBkZWxldGVkIHN1Y2Nlc3NmdWxseScgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVVcGRhdGVPcmRlclN0YXR1cyhyZXEsIHJlcykge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5xdWVyeTtcclxuICBjb25zdCB7IHN0YXR1cyB9ID0gcmVxLmJvZHk7XHJcbiAgY29uc3Qgc3FsID0gXCJVUERBVEUgb3JkZXJzIFNFVCBzdGF0dXMgPSA/IFdIRVJFIGlkID0gP1wiO1xyXG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZGIucXVlcnkoc3FsLCBbc3RhdHVzLCBpZF0pO1xyXG4gIGlmIChyZXN1bHQuYWZmZWN0ZWRSb3dzID09PSAwKSB7XHJcbiAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnT3JkZXIgbm90IGZvdW5kJyB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnT3JkZXIgc3RhdHVzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jywgc3RhdHVzOiBzdGF0dXMgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVDYW5jZWxPcmRlcihyZXEsIHJlcykge1xyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5xdWVyeTtcclxuICBjb25zdCBzcWwgPSBcIlVQREFURSBvcmRlcnMgU0VUIHN0YXR1cyA9ICdDYW5jZWxsZWQnIFdIRVJFIGlkID0gP1wiO1xyXG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZGIucXVlcnkoc3FsLCBbaWRdKTtcclxuICBpZiAocmVzdWx0LmFmZmVjdGVkUm93cyA9PT0gMCkge1xyXG4gICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ09yZGVyIG5vdCBmb3VuZCcgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ09yZGVyIGNhbmNlbGxlZCBzdWNjZXNzZnVsbHknIH0pO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlVXBkYXRlT3JkZXIocmVxLCByZXMpIHtcclxuICBjb25zdCB7IGlkIH0gPSByZXEucXVlcnk7XHJcbiAgY29uc3QgeyBvcmRlcl9kYXRlIH0gPSByZXEuYm9keTtcclxuICBjb25zdCBzcWwgPSBcIlVQREFURSBvcmRlcnMgU0VUIG9yZGVyX2RhdGUgPSA/IFdIRVJFIGlkID0gP1wiO1xyXG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZGIucXVlcnkoc3FsLCBbb3JkZXJfZGF0ZSwgaWRdKTtcclxuICBpZiAocmVzdWx0LmFmZmVjdGVkUm93cyA9PT0gMCkge1xyXG4gICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ09yZGVyIG5vdCBmb3VuZCcgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ09yZGVyIGRhdGUgdXBkYXRlZCBzdWNjZXNzZnVsbHknIH0pO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlUmVtb3ZlT3JkZXJGcm9tU2FsZXNSZXBvcnQocmVxLCByZXMpIHtcclxuICBjb25zdCB7IGlkIH0gPSByZXEucXVlcnk7XHJcbiAgY29uc3Qgc3FsID0gXCJVUERBVEUgb3JkZXJzIFNFVCBpbl9zYWxlc19yZXBvcnQgPSAwIFdIRVJFIGlkID0gP1wiO1xyXG4gIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgZGIucXVlcnkoc3FsLCBbaWRdKTtcclxuICBpZiAocmVzdWx0LmFmZmVjdGVkUm93cyA9PT0gMCkge1xyXG4gICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ09yZGVyIG5vdCBmb3VuZCcgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ09yZGVyIHJlbW92ZWQgZnJvbSBzYWxlcyByZXBvcnQgc3VjY2Vzc2Z1bGx5JyB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlT3JkZXJJZCgpIHtcclxuICByZXR1cm4gJ09SRC0nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpLnRvVXBwZXJDYXNlKCk7XHJcbn0iXSwibmFtZXMiOlsibXlzcWwiLCJwYXJzZSIsInNpZ24iLCJ2ZXJpZnkiLCJkYiIsImNyZWF0ZVBvb2wiLCJob3N0IiwicHJvY2VzcyIsImVudiIsIk1ZU1FMX0hPU1QiLCJwb3J0IiwiTVlTUUxfUE9SVCIsInVzZXIiLCJNWVNRTF9VU0VSIiwicGFzc3dvcmQiLCJNWVNRTF9QQVNTV09SRCIsImRhdGFiYXNlIiwiTVlTUUxfREFUQUJBU0UiLCJ3YWl0Rm9yQ29ubmVjdGlvbnMiLCJjb25uZWN0aW9uTGltaXQiLCJxdWV1ZUxpbWl0IiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInBhdGhuYW1lIiwicXVlcnkiLCJ1cmwiLCJjb29raWVzIiwiaGVhZGVycyIsImNvb2tpZSIsInRva2VuIiwic3RhdHVzIiwianNvbiIsImlzQXV0aGVudGljYXRlZCIsInVzZXJuYW1lUGFzc3dvcmRWZXJpZmllZCIsIkpXVF9TRUNSRVQiLCJlcnJvciIsImhhbmRsZUdldFByb2R1Y3RzIiwiaGFuZGxlR2V0VG90YWxTdG9jayIsImhhbmRsZUdldFNhbGVzUmVwb3J0IiwiaGFuZGxlR2V0U2FsZXNEYXRhIiwiaGFuZGxlR2V0VG90YWxQcm9kdWN0cyIsImhhbmRsZUdldFRvcFByb2R1Y3RzIiwiaGFuZGxlR2V0UmF0ZWRQcm9kdWN0c0NvdW50IiwiaGFuZGxlTG9nb3V0IiwiaGFuZGxlU2lnbkluIiwiaGFuZGxlVmFsaWRhdGVQaW4iLCJoYW5kbGVBZGRQcm9kdWN0Iiwic3RhcnRzV2l0aCIsImhhbmRsZVVwZGF0ZVByb2R1Y3QiLCJlbmRzV2l0aCIsImhhbmRsZVVwZGF0ZU9yZGVyU3RhdHVzIiwiaGFuZGxlQ2FuY2VsT3JkZXIiLCJoYW5kbGVVcGRhdGVPcmRlciIsImhhbmRsZURlbGV0ZVByb2R1Y3QiLCJoYW5kbGVSZW1vdmVPcmRlckZyb21TYWxlc1JlcG9ydCIsInNldEhlYWRlciIsImVuZCIsImNvbnNvbGUiLCJwYWdlIiwibGltaXQiLCJvZmZzZXQiLCJjb3VudFJlc3VsdCIsInRvdGFsSXRlbXMiLCJ0b3RhbCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsInByb2R1Y3RzIiwicGFyc2VJbnQiLCJjdXJyZW50UGFnZSIsInVzZXJuYW1lIiwiYm9keSIsInJlc3VsdHMiLCJsZW5ndGgiLCJ1c2VySWQiLCJpZCIsImV4cGlyZXNJbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwicGluIiwicmVzdWx0IiwidG90YWxTdG9jayIsInRpbWVGcmFtZSIsImRhdGVDb25kaXRpb24iLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJwcmljZSIsImltYWdlX3VybCIsInN0b2NrX3F1YW50aXR5IiwiY2F0ZWdvcnkiLCJzdXBwbGllcl9pZCIsInJhdGluZyIsIm9yZGVyX2lkIiwiZ2VuZXJhdGVPcmRlcklkIiwic3FsIiwiaW5zZXJ0SWQiLCJhZmZlY3RlZFJvd3MiLCJvcmRlcl9kYXRlIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJ0b1VwcGVyQ2FzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/[...nextapi].js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F%5B...nextapi%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5C%5B...nextapi%5D.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();